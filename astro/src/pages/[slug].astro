---
import Navbar from "../components/client/Navbar.jsx";
import SignUpDialog from "../components/client/SignUpDialog.jsx";
import Page from "../components/payload/collections/Page.astro";
import { getPages } from "../services/payload.js";

// export function getStaticPaths() {
//   return [
//     // Generiert: /hunde/rocky
//     {params: {hund: 'rocky'}},
//     // Generiert: /hunde/luna
//     {params: {hund: 'luna'}},
//     // Generiert: /hunde/rex
//     {params: {hund: 'rex'}},
//   ];
// }


const { slug } = Astro.params;

const allPageData = await getPages();
const pageData = allPageData.docs.find(x => x.slug == slug);

---


<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storyblok & Astro</title>
  </head>
  <body>
    <SignUpDialog client:only="react"></SignUpDialog>
    <Navbar client:only="react"></Navbar>
    <Page page={pageData}></Page>
  </body>
</html>